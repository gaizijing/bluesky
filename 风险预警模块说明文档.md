# 风险预警模块说明文档

## 一、核心功能

- **预警统计展示**：实时显示全部、危险、警告、一般预警的数量统计
- **按时间分组**：预警信息按时间倒序分组展示，方便快速定位最新预警
- **多级分类**：支持按预警等级（危险、警告、一般）分类
- **筛选功能**：提供按预警等级筛选的功能，快速聚焦特定等级的预警信息
- **历史查询**：支持查看近七日历史预警统计数据
- **响应式设计**：适配不同屏幕尺寸，保证在各种设备上的良好显示效果

## 二、API 接口文档

### 获取风险预警数据

**接口信息**

- **接口名称**：/weather/risk/report
- **功能描述**：获取当前监测点的所有风险预警信息，包括预警等级、类型、区域、时间段等详细信息
- **请求方式**：GET

**请求参数**：
| 参数名   | 类型   | 是否必填 | 说明                                |
|----------|--------|----------|-------------------------------------|
| pointId  | String | 是       | 监测点 ID，指定数据所属的监测位置   |
| timeRange  | String | 是       | 时间范围，格式为 "yyyy-MM-dd HH:mm:ss,yyyy-MM-dd HH:mm:ss"，表示查询该时间范围内的预警信息 |

**返回数据结构**

```javascript
{
    "updateTime": "2025-11-03 10:40:00", // 数据更新时间，格式：yyyy-MM-dd HH:mm:ss
    "warnings": [
      {
        "id": "RW20251103001", // 预警ID，格式：RW+日期+序号
        "level": "danger", // 预警等级：danger(危险)、warning(警告)、info(一般)
        "type": "强风", // 预警类型，描述预警的具体气象或环境因素
        "area": "A机场周边10km", // 影响区域，描述预警影响的地理位置
        "startTime": "10:05:00", // 预警开始时间，格式：HH:mm:ss
        "endTime": "11:30:00", // 预警结束时间，格式：HH:mm:ss
        "detail": "当前风速14.8m/s，预计10:30后增至18m/s，超过多数机型限制", // 详细描述，包含具体数值和预测信息
        "suggestion": "暂停该区域所有飞行任务，已起飞的立即返航", // 建议措施，提供应对预警的操作指导
        "handleStatus": "unhandled" // 处理状态：unhandled(未处理)、handled(已处理)
      }
    ]
  }
```

## 三、数据结构说明

### 1. 预警等级定义

| 等级 | 英文标识 | 颜色 | 说明 |
|------|----------|------|------|
| 危险 | danger | 红色系 | 严重影响飞行安全，需立即采取措施 |
| 警告 | warning | 橙色系 | 对飞行有较大影响，需谨慎对待 |
| 一般 | info | 蓝色系 | 有一定影响，但可控，需注意观察 |

### 2. 目标类型定义

| 类型 | 英文标识 | 颜色 | 说明 |
|------|----------|------|------|
| 起降点 | takeoff | 红色系 | 机场、起降场等起降区域 |
| 航线 | route | 橙色系 | 飞行器航线区域 |
| 空域 | airspace | 蓝色系 | 特定管控空域 |


### 4. 数据更新机制

- **实时更新**：监测点切换时自动刷新预警数据

## 四、界面交互说明

### 1. 预警统计卡片

- **功能**：显示各等级预警数量，支持点击筛选
- **交互**：点击卡片会筛选显示对应等级的预警信息
- **视觉效果**：选中状态下卡片会上浮并显示阴影效果
- **响应式**：小屏幕设备上卡片尺寸自适应调整

### 2. 统计分析功能

- **数据展示**：
  - **总览统计面板**：显示监测点总预警数量、各等级预警占比饼图
  - **处理状态统计**：通过进度条或仪表盘展示已处理/未处理预警比例
  - **类型分布图表**：使用柱状图展示各预警类型的数量分布
  - **区域预警排行**：以列表或横向柱状图展示Top 5预警高发区域
- **交互功能**：
  - **时间范围选择**：支持选择不同时间范围（今日、近7日、近30日）查看统计数据
  - **导出功能**：支持将统计数据导出为Excel或PDF格式
  - **图表交互**：支持图表悬停显示详细数据，点击特定类型进行筛选

### 3. 预警列表展示

- **时间分组**：按预警开始时间分组，时间倒序排列
- **分组标题**：使用黄色标识的时间标签，左侧有竖线装饰
- **预警项**：包含目标类型标签和预警内容，根据等级显示不同颜色
- **滚动**：内容区域支持垂直滚动，滚动条进行了样式美化

