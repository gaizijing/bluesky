# 未来风势面板说明文档

## 一、未来风势面板功能说明


- **气象要素监控**：支持风速、风向、风切变、湍流 4 种气象要素的实时数据展示
- **时间范围选择**：可切换 1 小时、3 小时、6 小时三种时间维度的数据展示
- **双图表可视化**：
  - 趋势图：展示所选气象要素随时间的变化趋势
  - 危险指数热力图：展示不同时间、不同高度的危险指数分布
- **交互功能**：支持地点切换、要素类型切换、时间范围调整，数据动态加载并同步更新图表

## 二、API 接口文档

### 1. 获取预测趋势数据

**接口信息**

- **接口名称**：/weather/forecast/trend
- **功能描述**：获取指定监测点、气象要素、时间范围内的趋势数据
- **请求方式**：POST

**请求参数**

| 参数名   | 类型   | 是否必填 | 说明                                                             |
|----------|--------|----------|------------------------------------------------------------------|
| pointId  | String | 是       | 监测点 ID，指定数据所属的监测位置                                |
| element  | String | 是       | 气象要素类型，支持值：windSpeed（风速）、windDirection（风向）、windShear（风切变）、turbulence（湍流） |
| timeRange| String | 是       | 时间范围，支持值：1h（1 小时）、3h（3 小时）、6h（6 小时）        |

**返回数据结构**

```javascript
{
  "trend": [
    {
      "time": String,  // 时间戳（ISO 格式，例："2023-10-01T12:00:00.000Z"）
      "value": Number  // 气象要素数值（单位随要素类型变化）
    }
  ]
}
```

**示例返回**

```javascript
{
  "trend": [
    { "time": "12:00", "value": 5.2 },
    { "time": "12:30", "value": 6.8 },
    { "time": "13:00", "value": 7.5 },
    { "time": "13:30", "value": 6.3 },
    { "time": "14:00", "value": 5.8 },
    { "time": "14:30", "value": 7.1 }
  ]
}
```

### 2. 获取热力图

**接口信息**

- **接口名称**：/weather/forecast/heatmap
- **功能描述**：获取指定监测点、时间范围内不同高度的危险指数数据
- **请求方式**：POST

**请求参数**

| 参数名   | 类型   | 是否必填 | 说明                                                             |
|----------|--------|----------|------------------------------------------------------------------|
| pointId  | String | 是       | 监测点 ID，指定数据所属的监测位置                                |
| element  | String | 是       | 气象要素类型，支持值：windSpeed（风速）、windDirection（风向）、windShear（风切变）、turbulence（湍流） |
| timeRange| String | 是       | 时间范围，支持值：1h（1 小时）、3h（3 小时）、6h（6 小时）        |

**返回数据结构**

```javascript
{
  "times": [String],   // 时间标签数组（例：["12:00", "12:30", ...]）
  "heights": [Number], // 高度数组（单位：米，例：[0, 50, 100, ...]）
  "data": [
    [Number]  // 二维数组：行=高度，列=时间，值=危险指数（0-100）
  ]
}
```

**示例返回**

```javascript
{
  "times": ["12:00", "12:30", "13:00", "13:30", "14:00", "14:30"],
  "heights": [0, 50, 100, 150, 200, 250, 300],
  "data": [
    [85, 82, 79, 84, 88, 90],
    [78, 76, 74, 79, 82, 85],
    [72, 70, 68, 73, 76, 79],
    [68, 65, 63, 69, 72, 75],
    [65, 62, 60, 66, 69, 72],
    [62, 59, 57, 63, 66, 69],
    [60, 57, 55, 61, 64, 67]
  ]
}
```

## 三、算法端对接说明

### 1. 数据生成要求

**气象要素数据（/weather/forecast/trend）**

- **数据点数量**：
  - 1h：6 个数据点（每 10 分钟 1 个）
  - 3h：6 个数据点（每 30 分钟 1 个）
  - 6h：6 个数据点（每 60 分钟 1 个）
- **数值范围**：
  - 风速（windSpeed）：3-12 m/s
  - 风向（windDirection）：0-360 °
  - 风切变（windShear）：0.01-0.1 s⁻¹
  - 湍流（turbulence）：0.1-2 m²/s³

**危险指数数据（/weather/forecast/heatmap）**

- **时间维度**：基于当前时间与气象要素数据的时间标签保持一致（例如，当前时间为 12:00，3h 数据的时间标签为 12:00、12:30、13:00、13:30、14:00、14:30）
- **高度维度**：0、50、100、150、200、250、300 米（间隔 50 米）
- **数值范围**：0-100（危险等级划分）
  - 0-59：危险等级「差」
  - 60-79：危险等级「良」
  - 80-100：危险等级「优」
