# 低空气象飞行保障服务系统 - 应用端与算法对接会议文档

## 一、项目概述

本项目是一个低空气象飞行保障服务系统，为低空飞行提供气象监测、预警和适飞分析等功能。系统包含四个主要功能模块：适飞分析模块、风险预警模块、实时风象面板和未来风势面板。

**主要业务目标**：
- 提供精准的低空气象监测数据
- 预测未来气象变化趋势
- 分析和评估飞行适飞条件
- 及时发布风险预警信息
- 支持飞行决策和安全保障

## 二、架构
- 应用端
  - **前端**：Vue 3 + Vite + Element Plus + ECharts + Cesium
  - **后端**：RESTful API服务（待实现）
- 模型端
  - **算法服务**：气象预测算法、适飞分析算法（待实现）
## 三、算法对接需求

- 主要气象算法模型通过RESTful API与后端交互
- 对于需要极低延迟的实时风场计算等模块，可以考虑使用SO库


## 四、下一步工作计划
1. **前端地图相关开发**
   - 气象可视化：3d风场,气温热力图，航线可视化等
  
2. **算法服务开发**：
   - 输出对接文档后端可参考开发
   - 实现适飞分析算法
   - 实现风险预警算法
   - 实现气象数据处理和预测算法

3. **后端API开发**：
   - 根据API接口文档实现后端服务
   - 实现数据存储和管理功能

## 五、API接口汇总

### 1. 适飞分析模块

#### 1.1 获取监测点适飞分析数据

| 接口名称 | URL | 方法 | 功能描述 |
|---------|-----|------|----------|
| 获取监测点适飞分析数据 | /weather/suitability | POST | 获取指定监测点未来3小时的适飞分析数据 |

**请求参数：**
| 参数名 | 类型 | 是否必填 | 描述 |
|-------|------|---------|------|
| pointId | string | 是 | 监测点唯一标识符 |
| timeInterval | integer | 是 | 数据时间间隔（分钟），默认10分钟 |
| totalHours | integer | 是 | 预测总时长（小时），默认3小时 |
| factors | array[string] | 否 | 可选的气象因素列表，如不指定则返回所有因素 |

**返回数据：**
包含suitabilityList数组的对象，每个因素对象包含factor名称和detail数组，详见后续数据结构示例

**来源：**
<mcfile name="适飞分析模块说明文档.md" path="e:/MyProduct/low-altitude-meteorological-service/适飞分析模块说明文档.md"></mcfile>

```javascript
{
  "timeInterval": 10, 
  "totalHours": 3, 
  "suitabilityList": [ 
    { 
      "factor": "综合", 
      "detail": [ 
        { 
          "timePoint": "10:00", 
          "statusData": true, 
          "valueData": "" 
        }, 
        { 
          "timePoint": "10:10", 
          "statusData": false, 
          "valueData": "" 
        } // ...... 
      ] 
    }, 
    { 
      "factor": "风", 
      "detail": [ 
        { 
          "timePoint": "2025-11-17 10:00", 
          "statusData": true, 
          "valueData": "" 
        }, 
        { 
          "timePoint": "2025-11-17 10:10", 
          "statusData": false, 
          "valueData": "9m/s" 
        } 
      ] 
    } // .... 
  ] 
}
```

**适飞判定规则**：
- 风速 > 8m/s 判定为不适飞
- 风切变 > 6m/s 判定为不适飞
- 颠簸指数为"中"或"高"判定为不适飞
- 综合判定：任一单项不适飞则综合状态为不适飞
### 2. 风险预警模块

#### 2.1 获取风险预警数据

| 接口名称 | URL | 方法 | 功能描述 |
|---------|-----|------|----------|
| 获取风险预警数据 | /weather/risk/report | GET | 获取当前监测点的时间范围内的风险预警信息 |

**请求参数：**
| 参数名 | 类型 | 是否必填 | 描述 |
|-------|------|---------|------|
| pointId | string | 是 | 监测点唯一标识符 |
| timeRange | string | 是 | 时间范围，格式如"2025-11-03 00:00:00,2025-11-03 23:59:59" |

**返回数据：**
包含updateTime和warnings数组的对象，详见后续数据结构示例

**来源：**
<mcfile name="风险预警模块说明文档.md" path="e:/MyProduct/low-altitude-meteorological-service/风险预警模块说明文档.md"></mcfile>
```javascript
{
  "updateTime": "2025-11-03 10:40:00", // 数据更新时间
  "warnings": [
    {
      "id": "RW20251103001", // 预警ID
      "level": "danger", // 预警等级：danger(危险)、warning(警告)、info(一般)
      "type": "强风", // 预警类型
      "area": "A机场周边10km", // 影响区域
      "startTime": "10:05:00", // 预警开始时间
      "endTime": "11:30:00", // 预警结束时间
      "detail": "当前风速14.8m/s...", // 详细描述
      "suggestion": "暂停该区域所有飞行任务...", // 建议措施
    }
  ]
}
```

### 3. 实时风象面板

#### 3.1 获取监测点实时天气数据

| 接口名称 | URL | 方法 | 功能描述 |
|---------|-----|------|----------|
| 获取监测点实时天气数据 | /weather/now/{pointId} | GET | 获取指定监测点的实时气象数据 |

**请求参数：**
| 参数名 | 类型 | 是否必填 | 描述 |
|-------|------|---------|------|
| pointId | string | 是 | 监测点唯一标识符（路径参数） |

**返回数据：**
包含风速、风向、风切变等级、稳定度指数等气象指标的对象

**来源：**
<mcfile name="实时风象面板说明文档.md" path="e:/MyProduct/low-altitude-meteorological-service/实时风象面板说明文档.md"></mcfile>

```javascript
{
  "windSpeed": { "value": 7.8, "unit": "m/s" }, // 风速
  "windDirection": { "value": 30, "unit": "°" }, // 风向
  "windShearLevel": "medium", // 风切变等级：low、medium、high
  "stabilityIndex": "C", // 稳定度指数：S、A、B、C
  "temperature": { "value": 12, "unit": "℃" }, // 温度
  "precipitation": { "value": 12, "unit": "mm" }, // 降水量
  // ... 其他气象指标
}
```
### 4. 未来风势面板

#### 4.1 获取平均预测趋势数据

| 接口名称 | URL | 方法 | 功能描述 |
|---------|-----|------|----------|
| 获取平均预测趋势数据 | /weather/forecast/trend | POST | 获取指定监测点气象要素的平均趋势数据 |

**请求参数：**
| 参数名 | 类型 | 是否必填 | 描述 |
|-------|------|---------|------|
| pointId | string | 是 | 监测点唯一标识符 |
| element | string | 是 | 气象要素类型，如'windSpeed'、'temperature'等 |
| timeRange | string | 是 | 时间范围，格式如"2025-11-03 00:00:00,2025-11-03 23:59:59" |

**返回数据：**
包含trend数组的对象，每个元素包含time和value字段

**来源：**
<mcfile name="未来风势面板说明文档.md" path="e:/MyProduct/low-altitude-meteorological-service/未来风势面板说明文档.md"></mcfile>

#### 4.2 获取热力图数据

| 接口名称 | URL | 方法 | 功能描述 |
|---------|-----|------|----------|
| 获取热力图数据 | /weather/forecast/heatmap | POST | 获取指定监测点不同高度的危险指数数据 |

**请求参数：**
| 参数名 | 类型 | 是否必填 | 描述 |
|-------|------|---------|------|
| pointId | string | 是 | 监测点唯一标识符 |
| element | string | 是 | 气象要素类型，如'windSpeed'、'temperature'等 |
| timeRange | string | 是 | 时间范围，格式如"2025-11-03 00:00:00,2025-11-03 23:59:59" |

**返回数据：**
包含times、heights和data二维数组的对象

**来源：**
<mcfile name="未来风势面板说明文档.md" path="e:/MyProduct/low-altitude-meteorological-service/未来风势面板说明文档.md"></mcfile>
**趋势数据**：
```javascript
{
  "trend": [
    { "time": "12:00", "value": 5.2 },
    { "time": "12:30", "value": 6.8 },
    // ... 其他时间点
  ]
}
```
**热力图数据**：
```javascript
{
  "times": ["12:00", "12:30", "13:00", /* ... */], // 时间标签
  "heights": [0, 50, 100, 150, 200, 250, 300], // 高度（米）
  "data": [ // 二维数组：行=高度，列=时间，值=危险指数（0-100）
    [85, 82, 79, /* ... */], // 0米高度
    [78, 76, 74, /* ... */], // 50米高度
    // ... 其他高度
  ]
}
```
## 六、算法数据需求
### 1. 适飞分析算法

**输入需求**：
- 监测点ID
- 时间间隔（分钟）
- 预测总时长（小时）
- 需计算的气象因素列表


**输出格式**：
- 要素、时间、适飞状态、数值 四元组

### 2. 风险预警算法

**输入需求**：
- 实时气象数据
- 历史预警数据
- 监测点信息


**输出格式**：
- 预警ID、等级、类型、区域、时间范围
- 详细描述和建议措施

### 3. 实时气象数据处理

**数据要求**：
- 风速：0-15 m/s，更新频率1分钟，精度保留1位小数
- 风切变等级：low（0-5 m/s/100m）、medium（5-10 m/s/100m）、high（>10 m/s/100m）
- 稳定度指数：S（极不稳定）、A（不稳定）、B（较稳定）、C（稳定）


### 4. 未来风势预测算法

**输入需求**：
- 监测点ID
- 气象要素类型（风速、风向、风切变、湍流）
- 时间范围（1小时、3小时、6小时）

**输出格式**：
- 包含时间点、气象要素数值的数组
- 时间点数组，高度数组，气象要素危险指数（二维数组，行=时间，列=高度）

**数据点要求**：
- 1小时：6个数据点（每10分钟1个）
- 3小时：6个数据点（每30分钟1个）
- 6小时：6个数据点（每60分钟1个）

**危险指数计算**：
- 高度维度：0、50、100、150、200、250、300米
- 数值范围：0-100（0-59：差，60-79：良，80-100：优）
